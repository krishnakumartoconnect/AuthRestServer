using Fido2NetLib;

@model Fido2NetLib.CredentialCreateOptions


<h2>Register Your Device</h2>

<script>
    const publicKey = @Html.Raw(Json.Serialize(Model));
    navigator.credentials.create({ publicKey })
        .then(function (newCredential) {
            var response = {
                id: newCredential.id,
                rawId: newCredential.rawId,
                response: {
                    attestationObject: newCredential.response.attestationObject,
                    clientDataJSON: newCredential.response.clientDataJSON
                }
            };

            // Send response to the server
            fetch('/Home/CompleteRegistration', {
                method: 'POST',
                body: JSON.stringify(response),
                headers: { 'Content-Type': 'application/json' }
            });
        })
        .catch(function (error) {
            console.log(error);
        });
</script>
